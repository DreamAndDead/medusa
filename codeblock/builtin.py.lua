dofile('./polyfill/pypolyfill.lua')
assert((abs(10) == 10))
assert((abs(0) == 0))
assert((abs((-10)) == 10))
assert((abs(1.07) == 1.07))
assert((abs((-0.52)) == 0.52))
assert((all(list {}) == true))
assert((all(list {1, 2}) == true))
assert((all(list {0, 1, 2}) == false))
assert((all(list {0, 0}) == false))
assert((any(list {}) == false))
assert((any(list {1, 2}) == true))
assert((any(list {0, 1, 2}) == true))
assert((any(list {0, 0}) == false))
assert((bin(0) == "0b0"))
assert((bin(10) == "0b1010"))
assert((bin(100) == "0b1100100"))
assert((bin(1000) == "0b1111101000"))
assert(bool(true))
assert(bool(1))
assert(bool("abc"))
assert(bool(list {1, 2}))
assert(not bool(false))
assert(not bool(list {}))
assert(not bool(""))
assert(not bool(0))
assert(callable(abs))
assert(callable(function(x) return x end))
assert(not callable(0))
assert(not callable("abc"))
assert(not callable(list {}))
local d = dict()
assert((len(d) == 0))
d[1] = "a"
d[2] = "b"
local e = dict(d)
assert((e[1] == "a"))
assert((e[2] == "b"))
local d, m = divmod(10, 3)
assert(((d == 3) and (m == 1)))
d, m = divmod((-10), 3)
assert(((d == (-4)) and (m == 2)))
d, m = divmod(10, (-3))
assert(((d == (-4)) and (m == (-2))))
d, m = divmod((-10), (-3))
assert(((d == 3) and (m == (-1))))
local l = list {0, 1, 2, 3, 4}
for i, n in enumerate(l) do
    assert((i == n))
end
l = list {0, 1, 2, 3, 4, 5}
local f = list(filter(nil, l))
assert((len(f) == 5))
assert((f[0] == 1))
assert((f[4] == 5))
f = list(filter(function(n) return ((math.fmod(n, 2)) == 0) end, l))
assert((len(f) == 3))
assert((f[0] == 0))
assert((f[1] == 2))
assert((f[2] == 4))
d = dict {[0] = "a", ["x"] = "y", [""] = "space"}
f = list(filter(nil, d))
assert((len(f) == 1))
assert((f[0] == "x"))
assert((float(10) == 10.0))
assert((float(10.4) == 10.4))
assert((float("12") == 12.0))
assert((float("10.8") == 10.8))
assert((hex(0) == "0x0"))
assert((hex(10) == "0xa"))
assert((hex(100) == "0x64"))
assert((hex(1000) == "0x3e8"))
assert((hex(10000) == "0x2710"))
assert((hex(100000) == "0x186a0"))
assert((int() == 0))
assert((int(10) == 10))
assert((int(10.5) == 10))
assert((int((-10.5)) == (-10)))
assert((int("10", 10) == 10))
assert((int("10", 16) == 16))
assert((int(" 10", 10) == 10))
assert((int("10 ", 16) == 16))
assert((int("0b10", 0) == 2))
assert((int("0x10", 0) == 16))
assert((int("-0b10", 0) == (-2)))
assert((int("-0x10", 0) == (-16)))
assert((len("") == 0))
assert((len("abcd") == 4))
assert((len(list {}) == 0))
assert((len(list {1, 2, 3}) == 3))
assert((len(dict {}) == 0))
assert((len(dict {[0] = 0, ["a"] = "z"}) == 2))
assert((len(list()) == 0))
l = list(list {1, 2, 3})
assert((len(l) == 3))
assert((l[0] == 1))
assert((l[1] == 2))
assert((l[2] == 3))
l = list {0, 1, 2, 3, 4}
local m = list(map(function(x) return (math.pow(x, 2)) end, l))
assert((len(m) == 5))
assert((m[0] == 0))
assert((m[1] == 1))
assert((m[2] == 4))
assert((m[3] == 9))
assert((m[4] == 16))
local n = list(map(function(x, y) return (x + y) end, l, m))
assert((len(n) == 5))
assert((n[0] == 0))
assert((n[1] == 2))
assert((n[2] == 6))
assert((n[3] == 12))
assert((n[4] == 20))
l = list {1, 2, 3, 4, 5}
assert((max(l) == 5))
assert((max(1, 2, 3, 4, 5) == 5))
l = list {1, 2, 3, 4, 5}
assert((min(l) == 1))
assert((min(1, 2, 3, 4, 5) == 1))
assert((oct(0) == "0o0"))
assert((oct(10) == "0o12"))
assert((oct(100) == "0o144"))
assert((oct(1000) == "0o1750"))
assert((oct(10000) == "0o23420"))
assert((pow(2, 10) == 1024))
assert((pow(2, 9, 3) == 2))
l = (function() local result = list {} for i in range(10) do result.append(i) end return result end)()
assert((len(l) == 10))
assert((l[0] == 0))
assert((l[9] == 9))
l = (function() local result = list {} for i in range(1, 5) do result.append(i) end return result end)()
assert((len(l) == 4))
assert((l[0] == 1))
assert((l[1] == 2))
assert((l[2] == 3))
assert((l[3] == 4))
l = (function() local result = list {} for i in range(1, 9, 2) do result.append(i) end return result end)()
assert((len(l) == 4))
assert((l[0] == 1))
assert((l[1] == 3))
assert((l[2] == 5))
assert((l[3] == 7))
l = list {0, 1, 2, 3, 4, 5}
assert((reduce(function(x, y) return (x + y) end, list {}, 10) == 10))
assert((reduce(function(x, y) return (x + y) end, l) == 15))
assert((reduce(function(x, y) return (x + y) end, l, 10) == 25))
l = list {3, 1, 4, 1, 5, 9}
local rl = list(reversed(l))
assert((rl[0] == 9))
assert((rl[1] == 5))
assert((rl[2] == 1))
assert((rl[3] == 4))
assert((rl[4] == 1))
assert((rl[5] == 3))
assert((round(10) == 10))
assert((round(10, 0) == 10))
assert((round(10, 1) == 10))
assert((round(10, 2) == 10))
assert((round(10, (-1)) == 10))
assert((round(10, (-2)) == 0))
assert((round(10.49, 0) == 10))
assert((round(10.51, 0) == 11))
assert((round(10.49, 1) == 10.5))
assert((round(10.51, 1) == 10.5))
l = list {0, 3, (-2), 5, 6, 9}
local sl = sorted(l)
assert((len(sl) == 6))
assert((sl[0] == (-2)))
assert((sl[1] == 0))
assert((sl[2] == 3))
assert((sl[3] == 5))
assert((sl[4] == 6))
assert((sl[5] == 9))
assert((sum(list {1, 2, 3}) == 6))
assert((sum(list {}) == 0))
assert((sum(list {1, 2, 3}, 0) == 6))
assert((sum(list {1, 2, 3}, 4) == 10))
local t = tuple()
assert((len(t) == 0))
t = tuple(list {1, 2, 3, 4})
print(t)
print(t[0])
assert((t[0] == 1))
assert((t[1] == 2))
assert((t[2] == 3))
assert((t[3] == 4))
local l1 = list {0, 1, 2, 3, 4, 5}
local l2 = list {"a", "b", "c"}
local l3 = list {3, ".", 1, 4, 1}
local z = list(zip(l1, l2, l3))
assert((z[0][0] == 0))
assert((z[0][1] == "a"))
assert((z[0][2] == 3))
assert((z[1][0] == 1))
assert((z[1][1] == "b"))
assert((z[1][2] == "."))
assert((z[2][0] == 2))
assert((z[2][1] == "c"))
assert((z[2][2] == 1))
